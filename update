#!/usr/bin/env bash

# create tables & triggers & FTS indexes
cat setup.sql| sqlite3 exploits.sqlite

wget https://github.com/offensive-security/exploitdb/raw/master/files_exploits.csv -O /tmp/files_exploits.csv
csvsql --create-if-not-exists --db sqlite:///exploits.sqlite --table exploits --insert /tmp/files_exploits.csv

wget https://github.com/offensive-security/exploitdb/raw/master/files_shellcodes.csv -O /tmp/files_shellcodes.csv
csvsql --create-if-not-exists --db sqlite:///exploits.sqlite --table shellcodes --insert /tmp/files_shellcodes.csv

wget https://github.com/offensive-security/exploitdb-papers/raw/master/files_papers.csv -O /tmp/files_papers.csv
csvsql --create-if-not-exists --db sqlite:///exploits.sqlite --table papers --insert /tmp/files_papers.csv